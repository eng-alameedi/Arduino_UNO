cmake_minimum_required(VERSION 3.14..3.30)

project(ARDUINO_LIBRARY
        VERSION 1.0.0
        LANGUAGES CXX
       )

set(file_name ArduinoLib)
file(GLOB SOURCE src/main.cpp src/lib/*.cpp)

include_directories(src/include)
include_directories(${ilog_SOURCE_DIR}/src/include)

set(CMAKE_CXX_STANDARD 20)
set(CMAKE_CXX_STANDARD_REQUIRED True)
set(CMAKE_EXPORT_COMPILE_COMMANDS ON)

include(FetchContent)
FetchContent_Declare(
  iLog
  GIT_REPOSITORY https://github.com/eng-alameedi/iLog.git
  GIT_TAG main
)
FetchContent_MakeAvailable(iLog)

if(NOT CMAKE_BUILD_TYPE)
  set(CMAKE_BUILD_TYPE Debug)
endif()

if(CMAKE_BUILD_TYPE MATCHES Release)
  target_compile_options(${file_name} INTERFACE -03 -DNDEBUG)
endif()

add_executable(${file_name} ${SOURCE})

target_link_libraries(${file_name} PRIVATE iLog)
target_include_directories(${file_name} PRIVATE ${ilog_SOURCE_DIR}/src/include)
